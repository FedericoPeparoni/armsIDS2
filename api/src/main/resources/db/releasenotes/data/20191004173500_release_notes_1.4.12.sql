do $$
declare
    v_query varchar;
begin

    -- remove existing release notes with release_version 1.4.12 if any
    -- when adding more release notes for this version, rename file and update below accordingly
    DELETE FROM release_notes WHERE release_version = '1.4.12';

    -- update existing release notes with same number to reopened and insert new release notes
    v_query := 'UPDATE release_notes SET reopened = true, updated_at = now(), updated_by = ''system'' WHERE number = $2;
                INSERT INTO release_notes (title, number, release_category_id, release_version) VALUES ($1,$2,$3,''1.4.12'');';

    -- bugs
    execute format(v_query) using 'NAVDB is broken for KCAA region', '114711', release_category_id('bug');
    execute format(v_query) using 'Local aircraft registry - updated records generate duplicate primary key error instead of updating existing record', '107335', release_category_id('bug');
    execute format(v_query) using 'Flight plan builder - THRUPLAN including a repositioning cluster pair has enroute charges set to 0', '114857', release_category_id('bug');
    execute format(v_query) using 'Users e-mail field format not highlighted when incorrect', '101775', release_category_id('bug');
    execute format(v_query) using 'Groups - user cannot add roles to a group', '114855', release_category_id('bug');
    execute format(v_query) using 'Aviation billing - preview invoice generates invalid boolean error', '114768', release_category_id('bug');
    execute format(v_query) using 'Flight movement builder - parking time resolution error should not be flagged if no parking charges are specified for the aerodrome category', '106336', release_category_id('bug');
    execute format(v_query) using 'Users - cannot modify self-care user', '114728', release_category_id('bug');
    execute format(v_query) using 'THRU flights - multiple landing charges (at intermediate aerodrome) are not charged', '101955', release_category_id('bug');
    execute format(v_query) using 'Selfcare forced password change form - the password fields are highlighted in red but no error message is displayed', '114720', release_category_id('bug');
    execute format(v_query) using 'Point of sale - calculate invoice - In/out dates are blank', '107331', release_category_id('bug');
    execute format(v_query) using 'Better detection of duplicate tower movement when THRU PLAN is A-B-C-A and tower log is segment C-A or D-A', '104328', release_category_id('bug');
    execute format(v_query) using 'Aviation billing - preview reports generates an error if another user is running recalculate', '114580', release_category_id('bug');
    execute format(v_query) using 'Navdb routing and waypoint issues', '114572', release_category_id('bug');
    execute format(v_query) using 'Import from spatia - item has been modified in the mean time', '114575', release_category_id('bug');
    execute format(v_query) using 'Import from spatia - reject due to duplicate primary key error when the detection of a duplicate flight plan does not detect the duplicate', '114576', release_category_id('bug');
    execute format(v_query) using 'Flight movement builder - cash flights are already invoiced before flight plan is received. This should not generate an error', '106272', release_category_id('bug');
    execute format(v_query) using 'Flight movement builder - OTHER type flights are reported zero-length-track error', '114596', release_category_id('bug');
    execute format(v_query) using 'Flight movement builder - cannot resolve point Z to a location', '114632', release_category_id('bug');
    execute format(v_query) using 'Reports - account status report outstanding balances shown are incorrect', '114598', release_category_id('bug');
    execute format(v_query) using 'FLKK/HQ prefix was used instead of FLSK prefix when user is in the FLSK billing centre', '114597', release_category_id('bug');
    execute format(v_query) using 'Inconsistent handling of ZZZZ flights', '114620', release_category_id('bug');
    execute format(v_query) using 'Invoices - during display, the entities associated with the invoice cannot be exported (flight movements, line items, transactions)', '106279', release_category_id('bug');
    execute format(v_query) using 'Import from spatia - MTOW categories defined causes general error - missing or duplicate value', '114573', release_category_id('bug');
    execute format(v_query) using 'Credit / debit notes - displays an incorrect warning (related to roundoff error) and fails', '114505', release_category_id('bug');
    execute format(v_query) using 'Aviation billing - amount in full words on the invoice is not translated into spanish', '114621', release_category_id('bug');
    execute format(v_query) using 'Flight movement builder - small foreign aircraft always generates an invalid CoA error', '114582', release_category_id('bug');
    execute format(v_query) using 'Reports - many reports are missing', '114579', release_category_id('bug');
    execute format(v_query) using 'All datagrids - download to PDF - remove this function - retain download to .csv only', '101747', release_category_id('bug');
    execute format(v_query) using 'Transactions - export function is missing', '106280', release_category_id('bug');
    execute format(v_query) using 'Route parser - exception on ERROR: geometry requires more points', '114436', release_category_id('bug');
    execute format(v_query) using 'Route parser exception on null point on "depAd FLKS - route: DCT FLCM DCT (S1158 E03015) - destAd: FLAA"', '114435', release_category_id('bug');
    execute format(v_query) using 'Route parser - failure on HRYR-FZQA - KNM UL432 KMI UB527 LUB mishandled', '107785', release_category_id('bug');
    execute format(v_query) using 'IATA invoice entry/exit points are incorrect - wrong points used', '114472', release_category_id('bug');
    execute format(v_query) using 'Aviation billing - Iata invoice sometimes has entry/exit points reversed', '114470', release_category_id('bug');
    execute format(v_query) using 'CAAB/Spatia - flight which is cancelled, then a new flight plan is submitted does not get a flight movement created', '104493', release_category_id('bug');
    execute format(v_query) using 'Aviation billing - crossing distance, not d_factor is shown in the IATA invoice', '114408', release_category_id('bug');
    execute format(v_query) using 'Invoice generation - invoices show 3 places of decimal for USD', '103243', release_category_id('bug');
    execute format(v_query) using 'Recalculate - unknown aerodrome results in SQL error actual_dep_ad/actual_dest_ad cannot be null', '107784', release_category_id('bug');
    execute format(v_query) using 'Aerodrome - lat/long - the error indicates the text entered does not match the format but does not indicate what the format is', '101679', release_category_id('bug');
    execute format(v_query) using 'Flight movement builder - FBCO is omitted from FBMN-FBCO-FBXG-FBKE flights', '107590', release_category_id('bug');
    execute format(v_query) using 'Flight movement builder - where domestic and international passenger charges are 0, the resolution error for no passenger data should not be flagged', '106262', release_category_id('bug');
    execute format(v_query) using 'Incorrect crossing distance used', '107545', release_category_id('bug');
    execute format(v_query) using 'Delta flights are not calculated correctly if MTOW is above 5700kg', '107163', release_category_id('bug');
    execute format(v_query) using 'Point of sale - data entry form does not require EET to be entered but calculate invoice then generates an error', '107332', release_category_id('bug');
    execute format(v_query) using 'When existing flight movement has flight level "VFR" update button is not enabled but no error message is shown', '106285', release_category_id('bug');
    execute format(v_query) using 'Aviation invoice for cash account created from flight movements cannot be paid', '106283', release_category_id('bug');
    execute format(v_query) using 'Transactions - credit / debit note creation – the description entered by the user is overwritten with the invoice number', '106263', release_category_id('bug');
    execute format(v_query) using 'Transactions - invoices show in transaction interface for selection by the user should be in reverse cronological order (newest at the top)', '105997', release_category_id('bug');
    execute format(v_query) using 'Transactions - replace "local" with "invoice"', '107371', release_category_id('bug');
    execute format(v_query) using 'Enroute basis is not set for flights shorter than the exempt minimum', '106005', release_category_id('bug');
    execute format(v_query) using 'THRU flight plans do not have FPL graphics created', '107333', release_category_id('bug');
    execute format(v_query) using 'Matching tower log to delta/thru plans between dep/arr time is incorrectly applied to all flights', '107385', release_category_id('bug');
    execute format(v_query) using 'Point of Sale - accounts list takes a long time to load', '100968', release_category_id('bug');
    execute format(v_query) using 'Flights are not being billed HKLK-HJJJJ', '107171', release_category_id('bug');
    execute format(v_query) using 'FBCO flights handled incorrectly - appears to be located in Chad', '106001', release_category_id('bug');
    execute format(v_query) using 'Flight movements mapped to incorrect accounts by ICAO code', '102630', release_category_id('bug');
    execute format(v_query) using 'Null pointer exception uploading from spatia results in reject', '107175', release_category_id('bug');
    execute format(v_query) using 'Service charge catalogue - data grid filter only works on current page', '106286', release_category_id('bug');
    execute format(v_query) using 'Bulk recalculation is not working as expected', '107317', release_category_id('bug');
    execute format(v_query) using 'SQL error when registration number is not set', '107534', release_category_id('bug');
    execute format(v_query) using 'Cesium no longer renders in Google Chrome v75.0 when selecting a flight movement or airspace', '107640', release_category_id('bug');
    execute format(v_query) using 'Wrong Aerodrome - recalculation doesn''t affect the FM status', '114645', release_category_id('bug');
    execute format(v_query) using 'Benchmark recalculate of one month data with logging to syslogd enabled/disabled', '107467', release_category_id('bug');
    execute format(v_query) using 'Aviation billing - some flights are not included in invoices', '114910', release_category_id('bug');
    execute format(v_query) using 'Charges should be rounded to appropriate number of decimal places before being stored in the database', '104706', release_category_id('bug');
    execute format(v_query) using 'Flight movements form - selection from multiple pages', '76239', release_category_id('bug');
    execute format(v_query) using 'Change flight movement view/edit privilege names', '70041', release_category_id('bug');
    execute format(v_query) using 'Performance - recalculate function is very slow', '71958', release_category_id('bug');
    execute format(v_query) using 'Flight movement builder - training flights mishandled', '114979', release_category_id('bug');
    execute format(v_query) using 'Flight movement builder - entry/exit waypoints are not rounded', '114735', release_category_id('bug');
    execute format(v_query) using 'Point of sale - flight for small kenyan registered aircraft with valid AOC is not in invoiced', '114997', release_category_id('bug');
    execute format(v_query) using 'Flightmovement route field - should not be mandatory for radar - only flight movement', '101841', release_category_id('bug');
    execute format(v_query) using 'Flight Movements Rejected due to DEF_ERR_ALREADY_EXISTS', '90226', release_category_id('bug');
    execute format(v_query) using 'Flight Reassignment Filters not working', '89195', release_category_id('bug');
    execute format(v_query) using 'Import from CRONOS - duplicate flights are not detected and merged', '114977', release_category_id('bug');
    execute format(v_query) using 'Point of sale - no discount for multiple training flights same aircraft on same day', '114985', release_category_id('bug');
    execute format(v_query) using 'Password change - user cannot change his password "a user with the same SMS already exists"', '115021', release_category_id('bug');
    execute format(v_query) using 'Transactions - problems with handling account credits', '115003', release_category_id('bug');
    execute format(v_query) using 'Flight movements - many errors in 2019-08-22 update due to null tasp currency', '115042', release_category_id('bug');
    execute format(v_query) using 'Import from CRONOS - manually deleted flight plan is set back to pending/incomplete when a cancellation arrives', '115018', release_category_id('bug');
    execute format(v_query) using 'Cannot send query from web portal - wrong address is used', '115044', release_category_id('bug');
    execute format(v_query) using 'Point of sale - flights from jkia/wilson to wajir are calculated incorrectly', '115050', release_category_id('bug');
    execute format(v_query) using 'Point of sale - flights through Wajir handling is not implemented in point of sale', '115049', release_category_id('bug');
    execute format(v_query) using 'Import from CRONOS - THRU PLANs with VFR is considered invalid', '115019', release_category_id('bug');
    execute format(v_query) using 'Flight movement builder - flight with radar route does not use nominal route', '115005', release_category_id('bug');
    execute format(v_query) using 'Invoices - voided invoices are not visible to briefing officers', '114995', release_category_id('bug');
    execute format(v_query) using 'Navdb - add aerodromes', '114926', release_category_id('bug');
    execute format(v_query) using 'THRUPLAN scheduled flight plan graphics are incorrect', '114827', release_category_id('bug');
    execute format(v_query) using 'When precedence is set user, nominal, scheduled, radar, flight graphics indicate radar distance was used for billing distance', '101956', release_category_id('bug');
    execute format(v_query) using 'Radar importer - error found in the application: cannot perform the operation due to an unknown error', '114880', release_category_id('bug');
    execute format(v_query) using 'Radar importer - general error - error found in the application: cannot perform the operation due to an unknown error', '114896', release_category_id('bug');
    execute format(v_query) using 'Captcha key should be added to system configuration', '89981', release_category_id('bug');
    execute format(v_query) using 'Rejected flight movements - general error - error found in the application: cannot perform the operation', '107323', release_category_id('bug');
    execute format(v_query) using 'Display total records and filltered records on all datagrids', '87792', release_category_id('bug');
    execute format(v_query) using 'Radar importer - reject data form has no data - the error report is "flight identifier is not specified"', '114904', release_category_id('bug');
    execute format(v_query) using 'Flight movement builder - wrong MTOW used in flight cost calculations', '114909', release_category_id('bug');
    execute format(v_query) using 'Aviation billing - cannot generate invoices and recalculate flights at the same time', '114800', release_category_id('bug');
    execute format(v_query) using 'Transactions - button not disabled on click and credit/debit note translation issues', '114919', release_category_id('bug');
    execute format(v_query) using 'Import from CRONOS - flight movements are being rejected with the error "route format is invalid"', '115016', release_category_id('bug');
    execute format(v_query) using 'Point of sale - duplicate flights entered by user are not trapped/reported until invoice is generated', '115052', release_category_id('bug');
    execute format(v_query) using 'Point of sale - invoice number on pdf doc indicates "All Accounts"', '114988', release_category_id('bug');
    execute format(v_query) using 'Multiple landing is not discounted A2MBN on 18/07/2019 @0700', '115064', release_category_id('bug');
    execute format(v_query) using 'General - disable directory browsing', '115099', release_category_id('bug');
    execute format(v_query) using 'Unspecified aircraft types and unspecified locations cannot text filter by status', '89928', release_category_id('bug');
    execute format(v_query) using 'User event log - IP address is not logged for failed login attempt', '89923', release_category_id('bug');
    execute format(v_query) using 'Tower log - upload no longer works', '115116', release_category_id('bug');
    execute format(v_query) using 'Radar flight strip with domestic aerodrome and ZZZZ departure/destination is classed as international arrival/departure', '115012', release_category_id('bug');
    execute format(v_query) using 'Import from CRONOS - THRU PLAN with ZZZZ point is considered invalid', '115017', release_category_id('bug');
    execute format(v_query) using 'Flight movement builder - charges are not rounded to cents', '114911', release_category_id('bug');
    execute format(v_query) using 'Point of sale - aviation invoices - calculate invoice - some fields are blank or incorrect', '114996', release_category_id('bug');
    execute format(v_query) using 'Users - filtering does not work properly/consistently', '115051', release_category_id('bug');
    execute format(v_query) using 'Aerodrome management – edit form - lat/long', '90159', release_category_id('bug');
    execute format(v_query) using 'Invoices - display of transactions and transaction payments when an invoice is selected does not display inverse exchange rate when inverse is selected', '115000', release_category_id('bug');
    execute format(v_query) using 'Radar importer - flights are being rejected for zero length route', '115015', release_category_id('bug');
    execute format(v_query) using 'Radar imported - exception - invalid property arrivalChargeDiscounts', '115079', release_category_id('bug');
    execute format(v_query) using 'Multiple landing incorrectly discounted for A2LZD on 01/07/2019 @1210', '115066', release_category_id('bug');
    execute format(v_query) using 'Reports - summarised invoice total report is not implemented correctly', '115020', release_category_id('bug');
    execute format(v_query) using 'Selfcare portal - add passenger service charge form to the self care portal', '115031', release_category_id('bug');
    execute format(v_query) using 'Flight movement builder - only generate "expired or missing COA" error if set in system configuration', '115101', release_category_id('bug');
    execute format(v_query) using 'Atc log - cannot parse the date exception', '115113', release_category_id('bug');
    execute format(v_query) using 'Exception - required String parameter ''invoiceCurrency'' is not present', '115112', release_category_id('bug');
    execute format(v_query) using 'Unspecified departures and destinations - many exceptions', '115109', release_category_id('bug');
    execute format(v_query) using 'Flight movement builder - flight MKB113 on the 22 August 2019 @9:30 is classed as OTHER - it should be domestic', '115115', release_category_id('bug');
    execute format(v_query) using 'Flight movements - ZZZZ dep/ and dest/ are identified as international if "by aerodrome prefix" is selected', '115117', release_category_id('bug');
    execute format(v_query) using 'Atc log - already exists error is reported and record is rejected', '115114', release_category_id('bug');
    execute format(v_query) using 'Account Statement report - column t.exchange_rate_to_usd does not exist', '115127', release_category_id('bug');
    execute format(v_query) using 'Tower logs - tower log record cannot be displayed in the user interface if it has no date of flight', '115128', release_category_id('bug');
    execute format(v_query) using 'FindAllFlightMovementsByAssociatedBillingLedgerId does not return flight_movements.enroute_cost_to_minimum', '115124', release_category_id('bug');
    execute format(v_query) using 'Flight movements - flights matched over midnight update departure time but not date of flight', '115125', release_category_id('bug');
    execute format(v_query) using 'Transactions - credit/debit note description is in English', '115119', release_category_id('bug');
    execute format(v_query) using 'Flight movement builder - account not removed from flight when no matching account is found', '115135', release_category_id('bug');
    execute format(v_query) using 'Flight movement builder - accounts are not being assigned to flights correctly', '115134', release_category_id('bug');
    execute format(v_query) using 'Radar importer - general error - error found in the application: cannot perform the operation', '115126', release_category_id('bug');
    execute format(v_query) using 'Invoices form is very slow to load', '115096', release_category_id('bug');

    -- changes
    execute format(v_query) using 'Identify domestic aerodromes by aerodrome prefix not by location falling within the FIR', '114729', release_category_id('change');
    execute format(v_query) using 'Operational hours - changes to implementation of airport operational hours', '107786', release_category_id('change');
    execute format(v_query) using 'Flight movement builder - if a leg of a THRU plan is a repositioning flight it should not be billed', '107174', release_category_id('change');
    execute format(v_query) using 'Invoices - add functionality to allow user to void a CASH invoice', '102415', release_category_id('change');
    execute format(v_query) using 'Aviation billing - contact on invoices and receipt templates is out of date', '114581', release_category_id('change');
    execute format(v_query) using 'Non-IATA invoice should have separate subtotals on invoice page - domestic/international/overflights for each charge type', '114602', release_category_id('change');
    execute format(v_query) using 'Aircraft type exemptions - exemption must be a percentage 0-100, not a boolean flag', '107765', release_category_id('change');
    execute format(v_query) using 'Nominal routes - add a bi-directional indicator to allow A-B routes to have a different direction from B-A routes', '107782', release_category_id('change');
    execute format(v_query) using 'Allow [APPROACH_FEE] and [AERODROME_FEE] to be used in enroute formulas', '107764', release_category_id('change');
    execute format(v_query) using 'International arrivals with an enroute distance of zero', '101671', release_category_id('change');
    execute format(v_query) using 'Passenger service charge return - add format button showing file format', '107372', release_category_id('change');
    execute format(v_query) using 'Transactions - add invoice number to columns displayed on page two of transaction creation (select invoice)', '105420', release_category_id('change');
    execute format(v_query) using 'Flight movement builder - add a system setting to allow the exemption for small locally registered aircraft to be enabled/disabled', '93578', release_category_id('change');
    execute format(v_query) using 'Point of sale - create AIP invoice in the currency in which the document is priced', '107384', release_category_id('change');
    execute format(v_query) using 'Point of sale - cash invoice template should contain KRA information not terms of payment info', '114989', release_category_id('change');
    execute format(v_query) using 'Flight movement - edit form should allow user to change key fields as well (flight id, reg, day-of-flight, dep-time dep-ad)', '114981', release_category_id('change');
    execute format(v_query) using 'Point of sale - Aviation billing - registration number is not included in both data grid showing the flights to be selected or user entered', '114982', release_category_id('change');
    execute format(v_query) using 'Can''t insert Reg Num on Flight Movements imported from CRONOS', '89897', release_category_id('change');
    execute format(v_query) using 'user needs to be able to specify currency for service charge catalogue charges (USD or ANSP)', '115001', release_category_id('change');
    execute format(v_query) using 'Point of sale - adhoc charge on data entry page nees to allow currency to be selected (either ANSP or USD; default USD)', '114998', release_category_id('change');
    execute format(v_query) using 'Point of sale - general charges should allow the user to enter a "user description" of the charge', '115002', release_category_id('change');
    execute format(v_query) using 'Flight movements - enable the find duplicate/missing flights must also enable show actual departure/destination', '115011', release_category_id('change');
    execute format(v_query) using 'Point of sale - add support for lump sum advance payments (proforma invoice)', '115026', release_category_id('change');
    execute format(v_query) using 'Transactions - enable KRA cashier name and receipt number for all payment types except "adjustments"', '115029', release_category_id('change');
    execute format(v_query) using 'Point of sale - allow users to pay for adhoc fees only for flights via point of sale general invoice', '115030', release_category_id('change');
    execute format(v_query) using 'Point of sale - training flights are not invoiced in KES', '115032', release_category_id('change');
    execute format(v_query) using 'Accounts - modify API to return the last modification date for account information', '115045', release_category_id('change');
    execute format(v_query) using 'Aerodromes - add aerodrome HCEB', '115097', release_category_id('change');

end $$;
